<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>RogueDeck</title>
	<link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" type="text/css" href="styles.css" />
</head>
<body>
	<div class="container">
		<div id="AlertDiv">
			<div id="AlertMsg"></div>
			<button data-bind="click: startNewGame">OK</button>
		</div>
		<div class="row">
			<h1 style="float:left; margin-right: 10px;">RogueDeck</h1>
		</div>
		<div class="row" data-bind="with: currentAreaCard">
			<div class="col-sm-4" id="AreaDiv">
				<h3>Area</h3>
				<div class="card">
					<h4>Steps: <span data-bind="text: window.rogueGame.stepsTaken"></span>/Level: <span data-bind="text: window.rogueGame.gameLevel"></span></h4>
					<div>
						<h4>You are in a <span data-bind="text: sizeText"></span> <span data-bind="text: type"></span></h4>
						<ul class="doorsList" data-bind="foreach: doors, css: { disabled: monsters().length > 0 }">
							<li>There is a door to the <a href="javascript:void(0);" data-bind="text: direction, click:window.rogueGame.tryMoveToNewArea"></a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="col-sm-4" id="MonstersDiv">
				<h3>Monsters</h3>
				<div class="row">
					<!-- ko foreach: monsters -->
					<div class="col-sm-12 card">
						<div class="row">
							<div class="col-sm-6">
								<h4><span data-bind="text:type"></span></h4>
								<div>
									Att: <span data-bind="text: attack"></span>, Def: <span data-bind="text:defense"></span>
								</div>
								<div>
									HP: <span data-bind="text: hitPoints"></span>
								</div>
								<div>
									<a href="javascript:void(0);" data-bind="click: window.rogueGame.processPlayerAttack">Attack!</a>
								</div>
							</div>
							<div class="col-sm-6">
								<img class="itemImg" data-bind="attr: { src: imageUrl }" />
							</div>
						</div>
					</div>
					<!-- /ko -->
				</div>
			</div>
			<div class="col-sm-4" id="LootDiv">
				<h3>Loot</h3>
				<ul class="lootList" data-bind="foreach: loot">
					<li>
						<div class="row">
							<div class="col-sm-6" data-bind="text: droppedBy"></div>
							<div class="col-sm-6 lootCardVerbs"><a href="javascript:void(0);" data-bind="click:window.rogueGame.takeItem">Take</a></div>
						</div>
						<div class="row" data-bind="template: { name: 'LootCardTemplate', data: $data }">
						</div>
					</li>
				</ul>
			</div>
		</div>
		<div class="row" data-bind="with:player">
			<div class="col-sm-4">
				<h3>Player: <span data-bind="text: name"></span></h3>
				<div class="card">
					<h4>Stats</h4>
					<table>
						<tr>
							<th>Strength</th>
							<td data-bind="text: strength"></td>
						</tr>
						<tr>
							<th>Intelligence</th>
							<td data-bind="text: intelligence"></td>
						</tr>
						<tr>
							<th>Dexterity</th>
							<td data-bind="text: dexterity"></td>
						</tr>
						<tr>
							<th>Vitality</th>
							<td data-bind="text: vitality"></td>
						</tr>
					</table>
					<div data-bind="visible: rogueGame.curTurnIndex() < 2">
						<input type="button" value="Re-roll" data-bind="click: rogueGame.rerollCharacter" />
					</div>
					<div data-bind="css: { statusAlert: hitPoints() < 12 || stomach() < 12 }">
						<h4>Vitals</h4>
						<table>
							<tr data-bind="css: { statusAlert: hitPoints() < 12 }">
								<th>Hit Points</th>
								<td><span data-bind="text:hitPoints"></span>(/<span data-bind="text:maxHitPoints"></span>)</td>
							</tr>
							<tr data-bind="css: { statusAlert: stomach() < 12 }">
								<th>Stomach</th>
								<td><span data-bind="text:stomach"></span>(/<span data-bind="text:maxStomach"></span>)</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
			<div class="col-sm-4">
				<h3>Inventory</h3>
				<ul class="lootList" data-bind="foreach: lootCards">
					<li>
						<div class="row">
							<div class="col-sm-12 lootCardVerbs">[<a href="javascript:void(0);" data-bind="text: verb, click:window.rogueGame.useItem"></a>] [<a href="javascript:void(0);" data-bind="click:window.rogueGame.dropItem">drop</a>]</div>
						</div>
						<div class="row" data-bind="template: { name: 'LootCardTemplate', data: $data }">
						</div>
					</li>
				</ul>
			</div>
			<div class="col-sm-4">
				<h3>Equipped</h3>
				<ul class="lootList">
					<li>
						<div class="row">
							<div class="col-sm-6"><strong>Right-Hand:</strong></div>
						</div>
						<div class="row" data-bind="template: { name: 'LootCardTemplate', data: weapon }">
						</div>
					</li>
					<li>
						<div class="row">
							<div class="col-sm-6"><strong>Armor:</strong></div>
						</div>
						<div class="row" data-bind="template: { name: 'LootCardTemplate', data: armor }">
						</div>
					</li>
				</ul>
			</div>
		</div>
		<div class="row" id="MessageLogDiv" data-bind="foreach: messageLog">
			<div data-bind="attr: { class: 'alert alert-' + $data.level }">
				<div class="col-sm-1"></div><div class="col-sm-11"><span data-bind="text:$data.message"></span></div><div style="clear: both"></div>
			</div>
		</div>
		<div class="row" data-bind="visible: messageLog().length > 0">
			<a href="javascript:void(0)" data-bind="click: window.rogueGame.clearMessageLog">Clear all messages</a>
		</div>
	</div>
	<div id="GoogleBranding"></div>
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	<script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-3.0.0.js"></script>
	<script src="https://www.google.com/jsapi"></script>
	<script src="scripts/utils.js"></script>
	<script src="scripts/rogueDeckDictionary.js"></script>
	<script src="scripts/rogueDeckGame.js"></script>
	<script type="text/javascript" id="PageCode">
		google.load('search', '1');
		$(document).ready(function () {
			rogueGame.startGameAndGetFirstRoom();
			ko.applyBindings(window.rogueGame);
		});
	</script>
	<!-- Named Templates -->
	<script type="text/html" id="BuffsBadgesTemplate">
		<span data-bind="text: displayName" class="badge"></span>
	</script>

	<script type="text/html" id="LootCardTemplate">
		<div class="col-sm-12 card">
			<div class="row">
				<div class="col-sm-6">
					<h4><span data-bind="text:type"></span><span class="badgesSpan" data-bind="if: value && value.buffs"><span data-bind="template: { name: 'BuffsBadgesTemplate', foreach: value.buffs }"></span></span></h4>
					<div data-bind="if: description">
						<span data-bind="text: description"></span>
					</div>
				</div>
				<div class="col-sm-6">
					<img class="itemImg" data-bind="attr: { src: imageUrl }" />
				</div>
			</div>
		</div>
	</script>
</body>
</html>